(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a8da3b4"],{"1dde":function(t,e,s){var a=s("d039"),r=s("b622"),i=s("2d00"),n=r("species");t.exports=function(t){return i>=51||!a((function(){var e=[],s=e.constructor={};return s[n]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,s){var a=s("861d"),r=s("e8b5"),i=s("b622"),n=i("species");t.exports=function(t,e){var s;return r(t)&&(s=t.constructor,"function"!=typeof s||s!==Array&&!r(s.prototype)?a(s)&&(s=s[n],null===s&&(s=void 0)):s=void 0),new(void 0===s?Array:s)(0===e?0:e)}},7921:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"app"}},[s("div",{staticClass:"row",class:{visible:!t.room,hidden:t.room}},[s("NameInput",{attrs:{buttonText:"Join"},on:{submit:t.joinSession}})],1),s("div",{staticClass:"row",class:{visible:t.room&&"LOBBY"===t.room.game.screen,hidden:!t.room||"LOBBY"!==t.room.game.screen}},[s("Lobby",{attrs:{socket:t.socket,room:t.room,players:t.players,isPlayerReady:t.isPlayerReady},on:{"percival-enabled":t.percivalEnabled,"oberon-enabled":t.oberonEnabled,"morgana-enabled":t.morganaEnabled,"ready-up":t.readyUp,"not-ready":t.notReady}})],1),s("div",{staticClass:"row",class:{visible:t.room&&"ROLE_REVEAL"===t.room.game.screen,hidden:!t.room||"ROLE_REVEAL"!==t.room.game.screen}},[s("Reveal",{attrs:{players:t.players,isPlayerReady:t.isPlayerReady,team:t.team,role:t.role,settings:t.room&&t.room.game?t.room.game.settings:{},metadata:t.metadata},on:{"ready-up":t.readyUp,"not-ready":t.notReady}})],1),s("div",{staticClass:"row",class:{visible:t.room&&"GAME"===t.room.game.screen,hidden:!t.room||"GAME"!==t.room.game.screen}},[s("Game",{attrs:{game:t.room&&t.room.game?t.room.game:{},players:t.players,team:t.team,role:t.role,playerId:t.getPlayerId(),isPlayerReady:t.isPlayerReady},on:{"reveal-quest-result":t.revealQuestResult,"propose-team":t.proposeTeam,"ready-up":t.readyUp,"not-ready":t.notReady}})],1)])},r=[],i=(s("7db0"),s("fb6a"),s("b0c0"),s("8055")),n=s.n(i),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-4 offset-md-4"},[s("div",{staticClass:"input-group input-group-lg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Name","aria-label":"Name","aria-describedby":"button-start",maxlength:"10",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-dark",attrs:{type:"button",id:"button-start"},on:{click:t.submit}},[t._v(t._s(t.buttonText))])])])])},l=[],c={name:"NameInput",props:{buttonText:String},data:function(){return{name:""}},methods:{submit:function(){this.$emit("submit",this.name)}}},d=c,u=s("2877"),m=Object(u["a"])(d,o,l,!1,null,null,null),p=m.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("h5",{staticClass:"card-header text-center"},[t._v("Game settings")]),s("div",{staticClass:"card-body"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4 mb-3"},[s("button",{class:["btn","btn-block",t.room&&t.room.game.settings.percivalEnabled?"btn-info":"btn-light",t.room&&t.room.game.settings.percivalEnabled?"border-info":"border"],attrs:{type:"button",disabled:!t.isRoomOwner},on:{click:function(e){return t.percivalEnabled(!t.room.game.settings.percivalEnabled)}}},[s("h5",[t._v("Percival")]),t._v("Knows Merlin's identity ")])]),s("div",{staticClass:"col-md-4 mb-3"},[s("button",{class:["btn","btn-block",t.room&&t.room.game.settings.morganaEnabled?"btn-danger":"btn-light",t.room&&t.room.game.settings.morganaEnabled?"border-danger":"border"],attrs:{type:"button",disabled:!t.isRoomOwner},on:{click:function(e){return t.morganaEnabled(!t.room.game.settings.morganaEnabled)}}},[s("h5",[t._v("Morgana")]),t._v("Appears as a second Merlin to Percival ")])]),s("div",{staticClass:"col-md-4"},[s("button",{class:["btn","btn-block",t.room&&t.room.game.settings.oberonEnabled?"btn-danger":"btn-light",t.room&&t.room.game.settings.oberonEnabled?"border-danger":"border"],attrs:{type:"button",disabled:!t.isRoomOwner},on:{click:function(e){return t.oberonEnabled(!t.room.game.settings.oberonEnabled)}}},[s("h5",[t._v("Oberon")]),t._v("Invisible to all but Merlin ")])])])])])])]),s("div",{staticClass:"row pt-4 pb-3"},[s("div",{staticClass:"col-md-12 text-center"},[s("p",{staticClass:"lead"},[t._v(" Further instruction and explanation will be provided as you play through The Resistance: Avalon. ")]),s("p",{staticClass:"lead"},[t._v("The next screen will reveal which team you are in and which role you will play.")]),t.playersStillNeeded>0?s("p",{staticClass:"lead"},[t._v("We are still waiting for "+t._s(t.playersStillNeeded)+" more "+t._s(1==t.playersStillNeeded?"player":"players")+" to join the lobby.")]):t._e(),0==t.playersStillNeeded?s("p",{staticClass:"lead"},[t._v(" Waiting for all players to click "),s("span",{staticClass:"badge badge-success"},[t._v("Ready")])]):t._e()])]),s("div",{staticClass:"row mb-5"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row text-center"},[t._l(t.players,(function(e){return s("div",{key:e.id,staticClass:"col-md-3"},[e.ready?s("div",{staticClass:"bg-success text-white pt-2 pb-1 mb-3 border border-success rounded"},[s("h5",[t._v(t._s(e.name))])]):t._e(),e.ready?t._e():s("div",{staticClass:"text-dark pt-2 pb-1 mb-3 border bg-light rounded"},[s("h5",[t._v(t._s(e.name))])])])})),t._l(t.playersStillNeeded,(function(e){return s("div",{key:e,staticClass:"col-md-3"},[t._m(1,!0)])})),t._l(t.maxPlayers-(t.players.length+t.playersStillNeeded),(function(e){return s("div",{key:e+100,staticClass:"col-md-3"},[t._m(2,!0)])}))],2)])])])]),s("div",{staticClass:"row mb-5"},[s("div",{staticClass:"col-md-6 offset-md-3"},[t.isPlayerReady?t._e():s("button",{staticClass:"btn btn-success btn-lg btn-block",attrs:{type:"button"},on:{click:function(e){return t.readyUp()}}},[t._v("Ready")]),t.isPlayerReady?s("button",{staticClass:"btn btn-warning btn-lg btn-block",attrs:{type:"button"},on:{click:function(e){return t.notReady()}}},[t._v("Cancel")]):t._e()])])])},b=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 mb-3"},[s("button",{staticClass:"btn btn-info btn-block",attrs:{type:"button",disabled:""}},[s("h5",[t._v("Merlin")]),t._v("Knows which team each player is a member of ")])]),s("div",{staticClass:"col-md-6 mb-3"},[s("button",{staticClass:"btn btn-danger btn-block",attrs:{type:"button",disabled:""}},[s("h5",[t._v("Assassin")]),t._v("Has an opportunity to steal the win after three successful quests ")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-secondary pt-2 pb-1 mb-3 border rounded"},[s("h5",[t._v("Required")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-secondary pt-2 pb-1 mb-3 border rounded"},[s("h5",[t._v("Optional")])])}],y={props:{socket:Object,room:Object,players:{type:Array,default:function(){return[]}},isPlayerReady:Boolean},data:function(){return{name:"",minPlayers:5,maxPlayers:10,currentMemberCount:0,readyClasses:"card bg-success text-white"}},computed:{isRoomOwner:function(){return this.room&&this.socket.id==this.room.ownerId},playersStillNeeded:function(){return this.players.length>=this.minPlayers?0:this.minPlayers-this.players.length}},methods:{percivalEnabled:function(t){this.$emit("percival-enabled",t)},morganaEnabled:function(t){this.$emit("morgana-enabled",t)},oberonEnabled:function(t){this.$emit("oberon-enabled",t)},readyUp:function(){this.$emit("ready-up")},notReady:function(){this.$emit("not-ready")}}},f=y,h=Object(u["a"])(f,v,b,!1,null,"f0d42efe",null),g=h.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-md-8 offset-md-2"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body text-center"},["GUARD"==t.role?s("h3",{staticClass:"card-title"},[t._v("You are a guard")]):t._e(),"MERLIN"==t.role?s("h3",{staticClass:"card-title"},[t._v("You are Merlin")]):t._e(),"OBERON"==t.role?s("h3",{staticClass:"card-title"},[t._v("You are Oberon")]):t._e(),"PERCIVAL"==t.role?s("h3",{staticClass:"card-title"},[t._v("You are Percival")]):t._e(),"ASSASSIN"==t.role?s("h3",{staticClass:"card-title"},[t._v("You are the Assassin")]):t._e(),"MINION"==t.role?s("h3",{staticClass:"card-title"},[t._v("You are a minion")]):t._e(),"MORGANA"==t.role?s("h3",{staticClass:"card-title"},[t._v("You are Morgana")]):t._e(),"EVIL"==t.team?s("p",{staticClass:"card-text"},[t._v("You are in Evil")]):t._e(),"GOOD"==t.team?s("p",{staticClass:"card-text"},[t._v("You are in Good")]):t._e()])])])]),s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-md-8 offset-md-2"},[s("div",{staticClass:"card"},[s("h5",{staticClass:"card-header"},[t._v("Things you need to know about your team")]),"EVIL"==t.team||"MERLIN"==t.role?s("h5",{staticClass:"card-title text-center pt-3"},[t._v("Members of Evil")]):t._e(),"EVIL"==t.team||"MERLIN"==t.role?s("h4",{staticClass:"card-text text-center"},t._l(t.metadata,(function(e,a){return s("span",{key:a,staticClass:"badge badge-pill badge-danger mx-2"},[t._v(t._s(t.findPlayerName(e)))])})),0):t._e(),"PERCIVAL"==t.role?s("h5",{staticClass:"card-title text-center pt-3"},[t._v("Merlin is")]):t._e(),"PERCIVAL"==t.role?s("h4",{staticClass:"card-text text-center"},[s("span",{staticClass:"badge badge-pill badge-info mx-2"},[t._v(t._s(t.findPlayerName(t.metadata[0])))]),2==t.metadata.length?s("span",[t._v("or")]):t._e(),2==t.metadata.length?s("span",{staticClass:"badge badge-pill badge-info mx-2"},[t._v(t._s(t.findPlayerName(t.metadata[1])))]):t._e()]):t._e(),"GOOD"==t.team&&"MERLIN"!=t.role?s("div",{staticClass:"card-body"},["PERCIVAL"==t.role&&t.settings.morganaEnabled?s("p",{staticClass:"card-text"},[t._v("As Percival you are given the identity of Merlin, however Morgana is also disguised as Merlin.")]):t._e(),"PERCIVAL"!=t.role||t.settings.morganaEnabled?t._e():s("p",{staticClass:"card-text"},[t._v("As Percival you are given the identity of Merlin.")]),"GUARD"==t.role?s("p",{staticClass:"card-text"},[t._v("You do not know the identity of anyone else, or what team they are in.")]):t._e()]):t._e(),"MERLIN"==t.role?s("div",{staticClass:"card-body"},[s("p",{staticClass:"card-text"},[t._v("As Merlin you are told who is in Evil. Evil team members also know who is in Evil.")]),s("p",{staticClass:"card-text"},[t._v("Evil will take the win if you are successfully identified by the Assassin after three successful quests.")])]):t._e(),"EVIL"==t.team?s("div",{staticClass:"card-body"},["MORGANA"==t.role?s("p",{staticClass:"card-text"},[t._v("As Morgana you are disguised as Merlin, which confuses Percival.")]):t._e(),"OBERON"==t.role?s("p",{staticClass:"card-text"},[t._v("As Oberon your identity is hidden to all players except Merlin. Evil members do not know that you are in Evil.")]):t._e(),"ASSASSIN"==t.role?s("p",{staticClass:"card-text"},[t._v("As the Assassin you will have a chance to identify Merlin if three quests are successfully completed. If you are successful Evil will take the win.")]):t._e(),s("p",{staticClass:"card-text"},[t._v("As an Evil team member you are told who is in Evil. You also have the option to sabotage quests that you are sent on.")]),s("p",{staticClass:"card-text"},[t._v("Disclosing who you are could cost you the game.")])]):t._e()])])]),s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-md-8 offset-md-2"},[s("div",{staticClass:"card"},[s("h5",{staticClass:"card-header"},[t._v("Things you need to know about the game")]),s("div",{staticClass:"card-body"},[s("p",{staticClass:"card-text"},[t._v("The goal of Good is to successfully complete three out of five quests and help Merlin avoid identification by the Assassin.")]),s("p",{staticClass:"card-text"},[t._v("The goal of Evil is to promote suspicion amongst players in an attempt to disrupt the flow of the game.")]),s("p",{staticClass:"card-text"},[t._v("There are five quests that can be completed. Each turn a player will be nominated as the quest's leader and will propose a team.")]),s("p",{staticClass:"card-text"},[t._v("All players will vote to agree or disagree with the team proposal.")]),s("p",{staticClass:"card-text"},[t._v("If the proposal is not accepted the quest is not started and a new quest leader is chosen.")]),s("p",{staticClass:"card-text"},[t._v("If the proposal is accepted the quest will begin and the quest members will be asked for the outcome they would like.")]),s("p",{staticClass:"card-text"},[t._v("Good members on the quest may only choose 'Success' as the outcome, however Evil members can choose to 'Sabotage' the quest.")]),s("p",{staticClass:"card-text"},[t._v("If all players choose 'Success' the quest will be completed successfully and the play moves to the next quest with a new quest leader.")]),s("p",{staticClass:"card-text"},[t._v("If an Evil team member is on the quest and they choose to 'Sabotage' the quest, the quest will fail and the play moves to the next quest with a new quest leader.")]),s("p",{staticClass:"card-text"},[t._v("At the start of the game Evil team members are told which players are in Evil.")]),s("p",{staticClass:"card-text"},[t._v("At the start of the game Guards are told that they are in Good and are given no other information.")]),s("p",{staticClass:"card-text"},[t._v("At the start of the game Merlin is told which players are in Evil.")]),t.settings.percivalEnabled&&t.settings.morganaEnabled?s("p",{staticClass:"card-text"},[t._v("At the start of the game Percival is told the identity of Merlin, however Morgana is also disguised as Merlin.")]):t._e(),t.settings.percivalEnabled&&!t.settings.morganaEnabled?s("p",{staticClass:"card-text"},[t._v("At the start of the game Percival is told the identity of Merlin.")]):t._e(),t.settings.oberonEnabled?s("p",{staticClass:"card-text"},[t._v("Oberon is not revealed to Evil players but is revealed to Merlin.")]):t._e(),s("p",{staticClass:"card-text"},[t._v("After three successful quests the Assassin will have an opportunity to identify Merlin.")]),s("p",{staticClass:"card-text"},[t._v("Good will take the win if the Assassin does not manage to successfully identify Merlin.")]),s("p",{staticClass:"card-text"},[t._v("Evil will take the win if the Assassin manages to successfully identify Merlin.")]),s("p",{staticClass:"card-text"},[t._v("Evil will take the win if three out of the five quests are sabotaged.")]),s("p",{staticClass:"card-text"},[t._v("Evil will take the win if five team proposals are rejected for a single quest.")]),s("p",{staticClass:"card-text"},[t._v("Don't worry if this is your first time playing. Instructions and explanation will be provided to you as you play.")])])])])]),s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-md-8 offset-md-2"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row text-center"},t._l(t.players,(function(e){return s("div",{key:e.id,staticClass:"col-md-3"},[e.ready?s("div",{staticClass:"bg-success text-white pt-2 pb-1 mb-3 border border-success rounded"},[s("h5",[t._v(t._s(e.name))])]):t._e(),e.ready?t._e():s("div",{staticClass:"text-dark pt-2 pb-1 mb-3 border rounded"},[s("h5",[t._v(t._s(e.name))])])])})),0)])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8 offset-md-2"},[t.isPlayerReady?t._e():s("button",{staticClass:"btn btn-success btn-lg btn-block",attrs:{type:"button"},on:{click:function(e){return t.readyUp()}}},[t._v("Ready")]),t.isPlayerReady?s("button",{staticClass:"btn btn-warning btn-lg btn-block",attrs:{type:"button"},on:{click:function(e){return t.notReady()}}},[t._v("Cancel")]):t._e()])])])},C=[],w={props:{team:String,role:String,settings:Object,ready:Boolean,socket:Object,metadata:Array,players:Array,isPlayerReady:Boolean},methods:{findPlayerName:function(t){return this.players.find((function(e){return e.id==t})).name},readyUp:function(){this.$emit("ready-up")},notReady:function(){this.$emit("not-ready")}}},E=w,x=Object(u["a"])(E,_,C,!1,null,null,null),k=x.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"row mb-3"},[s("QuestLog",{attrs:{questLog:t.game.questLogs,players:t.players}})],1),s("div",{staticClass:"row mb-3"},[s("Players",{attrs:{players:t.players}})],1),"QUEST_PROPOSING"!=t.game.state||t.playerIsOrganiser?t._e():s("div",{staticClass:"row"},[s("PlainOutput",{attrs:{header:"Quest "+t.game.currentQuest.id+" - Team proposal",line:t.playerIsOrganisingTeamText,isPlayerReady:t.isPlayerReady},on:{"ready-up":t.readyUp,"not-ready":t.notReady}})],1),"QUEST_PROPOSING"==t.game.state&&t.playerIsOrganiser?s("div",{staticClass:"row"},[s("QuestProposalInput",{attrs:{questId:t.game.currentQuest.id,players:t.players},on:{"propose-team":t.proposeTeam}})],1):t._e(),"QUEST_PROPOSAL"==t.game.state?s("div",{staticClass:"row"},[s("QuestProposalVoteInput",{attrs:{organiser:t.currentOrganiser.name,names:t.proposedQuestMemberNames}})],1):t._e(),"QUEST_PROPOSAL_RESULT"==t.game.state?s("div",{staticClass:"row"},[s("QuestProposalVoteResult",{attrs:{players:t.players,proposalAccepted:t.game.currentQuest.proposalAccepted}})],1):t._e(),"QUEST_STARTED"!=t.game.state||t.game.currentQuest.proposedPlayerIds.includes(t.playerId)?t._e():s("div",{staticClass:"row"},[s("PlainOutput",{attrs:{line:"The results of the quest will be revealed shortly."}})],1),"QUEST_STARTED"==t.game.state&&t.game.currentQuest.proposedPlayerIds.includes(t.playerId)?s("div",{staticClass:"row"},[s("QuestOutcomeVoteInput",{attrs:{members:t.proposedQuestMembers,isEvil:"EVIL"==t.team}})],1):t._e(),"QUEST_RESULT_REVEAL"==t.game.state?s("div",{staticClass:"row mb-3"},[s("QuestResultReveal",{attrs:{organiserName:t.currentOrganiser.name,playerIsOrganiser:t.playerIsOrganiser,results:t.game.currentQuest.votes},on:{"reveal-quest-result":t.revealQuestResult}})],1):t._e(),"QUEST_RESULT"==t.game.state?s("div",{staticClass:"row mb-3"},[s("Outcome",{attrs:{result:"FAIL",outcome:"The quest was sabotaged",buttonText:"Ready"}})],1):t._e(),"QUEST_RESULT"==t.game.state?s("div",{staticClass:"row mb-3"},[s("Outcome",{attrs:{result:"SUCCEED",outcome:"The quest was completed successfully",buttonText:"Ready"}})],1):t._e()])},A=[],O=(s("d81d"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("h5",{staticClass:"card-header"},[t._v("Quest log")]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("table",{staticClass:"table text-center table-bordered table-sm"},[t._m(0),s("tbody",t._l(t.questLog,(function(e){return s("tr",{key:e.id},[s("th",{class:{"bg-info text-white":"SUCCEED"===e.result,"bg-danger text-white":"FAIL"===e.result},attrs:{scope:"row"}},[t._v(t._s(e.id))]),s("td",[t._v(t._s(e.requiredPlayers))]),s("td",[t._v(t._s(t.getPlayerNameById(e.organiserId)))]),t._l(e.playerIds,(function(a,r){return s("td",{key:r*e.id},[t._v(t._s(t.getPlayerNameById(a)))])}))],2)})),0)])])])])])])}),S=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Quest")]),s("th",{attrs:{scope:"col"}},[t._v("Required")]),s("th",{attrs:{scope:"col"}},[t._v("Organiser")]),s("th",{staticClass:"text-center",attrs:{scope:"col",colspan:"5"}},[t._v("Members")])])])}],I={props:{players:Array,questLog:Array},methods:{getPlayerNameById:function(t){var e=this.players.find((function(e){return e.id==t}));return e&&e.name?e.name:""}}},P=I,T=Object(u["a"])(P,O,S,!1,null,null,null),M=T.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row mb-3"},t._l(t.results,(function(e,a){return s("div",{key:a,class:["col-2",0===a?"offset-"+t.resultOffset():""]},[e.revealed&&"SUCCEED"===e.choice?s("div",{staticClass:"py-5 bg-info border border-info rounded text-center text-white"},[s("h5",[t._v("Succeed")])]):t._e(),e.revealed&&"SABOTAGE"===e.choice?s("div",{staticClass:"py-5 bg-danger border border-danger rounded text-center text-white"},[s("h5",[t._v("Sabotage")])]):t._e(),e.revealed?t._e():s("div",{staticClass:"py-5 bg-light border rounded text-center"},[s("h5",[t._v("Result")])])])})),0),!t.playerIsOrganiser&&t.results.filter((function(t){return!t.revealed})).length>0?s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[t._v(t._s(t.organiserName)+" is revealing the results.")])]):t._e(),t.playerIsOrganiser&&t.results.filter((function(t){return!t.revealed})).length>0?s("div",{staticClass:"row"},t._l(t.results,(function(e,a){return s("div",{key:a,class:["col-2",0===a?"offset-"+t.resultOffset():""]},[s("button",{staticClass:"btn btn-dark btn-block",attrs:{disabled:e.revealed},on:{click:function(e){return t.reveal(a)}}},[t._v("Reveal")])])})),0):t._e(),0==t.results.filter((function(t){return!t.revealed})).length?s("div",{staticClass:"row"},[s("div",{staticClass:"col-4 offset-4"},[s("button",{staticClass:"btn btn-dark btn-block",on:{click:function(e){return t.ready()}}},[t._v("Ready")])])]):t._e()])])])},N=[],q={name:"QuestResultReveal",props:{playerIsOrganiser:Boolean,organiserName:String,results:Array},methods:{resultOffset:function(){switch(this.results.length){case 2:return 4;case 3:return 3;case 4:return 2;case 5:return 1}},reveal:function(t){this.$emit("reveal-quest-result",t)},ready:function(){this.$emit("ready-up")}}},L=q,$=Object(u["a"])(L,Q,N,!1,null,null,null),U=$.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-12"},[s("h4",{staticClass:"card-title"},[t._v(t._s(t.organiser)+" has proposed the following team:")]),s("h3",{staticClass:"card-title pb-5"},t._l(t.names,(function(e,a){return s("span",{key:a,staticClass:"badge badge-pill badge-dark mx-2"},[t._v(t._s(e))])})),0),s("h4",{staticClass:"card-title"},[t._v("What do you think? Your vote will be seen by the other players.")])])]),t._m(0)])])])},B=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row pb-5"},[s("div",{staticClass:"col-4 offset-2"},[s("button",{staticClass:"btn btn-dark btn-lg btn-block"},[t._v("Approve")])]),s("div",{staticClass:"col-4"},[s("button",{staticClass:"btn btn-dark btn-lg btn-block"},[t._v("Reject")])])])}],G={props:{organiser:String,names:Array}},V=G,Y=Object(u["a"])(V,j,B,!1,null,null,null),D=Y.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("h5",{staticClass:"card-header"},[t._v(t._s(t.header))]),s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 pt-5"},[s("h4",{staticClass:"card-title"},[t._v(t._s(t.line))])])]),s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-md-4 offset-md-4"},[t.isPlayerReady?t._e():s("button",{staticClass:"btn btn-success  btn-block",attrs:{type:"button"},on:{click:function(e){return t.readyUp()}}},[t._v("Ready")]),t.isPlayerReady?s("button",{staticClass:"btn btn-warning btn-block",attrs:{type:"button"},on:{click:function(e){return t.notReady()}}},[t._v("Cancel")]):t._e()])])])])])},J=[],W={props:{header:String,line:String,isPlayerReady:Boolean},methods:{readyUp:function(){this.$emit("ready-up")},notReady:function(){this.$emit("not-ready")}}},K=W,H=Object(u["a"])(K,F,J,!1,null,null,null),z=H.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-12"},[s("h4",{staticClass:"card-title"},[t._v("You are on a quest with the following members:")]),s("h3",{staticClass:"card-title pb-5"},t._l(t.members,(function(e,a){return s("span",{key:a,staticClass:"badge badge-pill badge-dark mx-2"},[t._v(t._s(e))])})),0),s("h4",{staticClass:"card-title"},[t._v("How would you like to proceed?")]),s("h4",{staticClass:"card-title"},[t._v("Your decision will be kept anonymous.")])])]),s("div",{staticClass:"row pb-5"},[t._m(0),s("div",{staticClass:"col-4"},[s("button",{staticClass:"btn btn-danger btn-block",attrs:{disabled:!t.isEvil}},[t._v("Sabotage")])])])])])])},Z=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-4 offset-2"},[s("button",{staticClass:"btn btn-info btn-block"},[t._v("Succeed")])])}],tt={props:{isEvil:Boolean,members:Array}},et=tt,st=Object(u["a"])(et,X,Z,!1,null,null,null),at=st.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{class:["card","FAIL"===t.result?"bg-danger":"bg-info"]},[s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-12"},[s("h3",{staticClass:"card-title text-white"},[t._v(t._s(t.outcome))])])])])]),s("div",{staticClass:"row pb-5"},[s("div",{staticClass:"col-4 offset-4"},[s("button",{staticClass:"btn btn-dark btn-lg btn-block"},[t._v(t._s(t.buttonText))])])])])])])},it=[],nt={props:{result:String,outcome:String,buttonText:String}},ot=nt,lt=Object(u["a"])(ot,rt,it,!1,null,null,null),ct=lt.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-5 offset-1"},[s("h3",{staticClass:"card-title"},[t._v("Approve")]),s("h3",{staticClass:"card-title"},t._l(t.players.filter((function(t){return"APPROVE"==t.vote})),(function(e,a){return s("span",{key:a,staticClass:"badge badge-pill badge-dark mx-2 my-2"},[t._v(t._s(e.name))])})),0)]),s("div",{staticClass:"col-5"},[s("h3",{staticClass:"card-title"},[t._v("Reject")]),s("h3",{staticClass:"card-title"},t._l(t.players.filter((function(t){return"REJECT"==t.vote})),(function(e,a){return s("span",{key:a,staticClass:"badge badge-pill badge-dark mx-2 my-2"},[t._v(t._s(e.name))])})),0)])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-4 offset-4"},[t.proposalAccepted?s("p",[t._v("The team proposal has been approved.")]):t._e(),t.proposalAccepted?t._e():s("p",[t._v("The team proposal has been rejected.")])])]),t._m(0)])])])},ut=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-4 offset-4"},[s("button",{staticClass:"btn btn-dark btn-block"},[t._v("OK")])])])}],mt={props:{players:Array,proposalAccepted:Boolean}},pt=mt,vt=Object(u["a"])(pt,dt,ut,!1,null,null,null),bt=vt.exports,yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("h5",{staticClass:"card-header"},[t._v("Quest "+t._s(t.questId)+" - Team proposal")]),s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row py-5"},t._l(t.selected,(function(e,a){return s("div",{key:a,class:["col-md-2 mb-2",a%5===0?"offset-md-1":""]},[s("button",{staticClass:"btn btn-dark btn-lg btn-block",on:{click:function(e){return t.unselect(a)}}},[t._v(t._s(e.name))])])})),0),s("div",{staticClass:"row py-5"},t._l(t.notSelected,(function(e,a){return s("div",{key:a,class:["col-md-2 mb-2",a%5===0?"offset-md-1":""]},[s("button",{staticClass:"btn btn-dark btn-lg btn-block",on:{click:function(e){return t.select(a)}}},[t._v(t._s(e.name))])])})),0),s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-4 offset-4"},[s("button",{staticClass:"btn btn-dark btn-lg btn-block",on:{click:t.submit}},[t._v("Submit")])])])])])])},ft=[],ht=(s("a434"),s("a9e3"),{props:{players:Array,questId:Number},data:function(){return{selected:[],notSelected:[]}},created:function(){this.notSelected=this.players.slice()},methods:{select:function(t){this.selected.push(this.notSelected.splice(t,1)[0])},unselect:function(t){this.notSelected.push(this.selected.splice(t,1)[0])},submit:function(){for(var t=[],e=0;e<this.selected.length;e++)t.push(this.selected[e].id);this.$emit("proposeTeam",t)}}}),gt=ht,_t=Object(u["a"])(gt,yt,ft,!1,null,null,null),Ct=_t.exports,wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row text-center"},t._l(t.players,(function(e){return s("div",{key:e.id,staticClass:"col-md-2"},[e.ready?s("div",{staticClass:"bg-success text-white pt-2 pb-1 mb-3 border border-success rounded"},[s("h5",[t._v(t._s(e.name))])]):t._e(),e.ready?t._e():s("div",{staticClass:"text-dark pt-2 pb-1 mb-3 border rounded"},[s("h5",[t._v(t._s(e.name))])])])})),0)])])])},Et=[],xt={props:{players:{type:Array,default:function(){return[{name:"Ben",active:!1},{name:"Sidd",active:!0},{name:"Sam",active:!1},{name:"Rodney",active:!1}]}}}},kt=xt,Rt=Object(u["a"])(kt,wt,Et,!1,null,null,null),At=Rt.exports,Ot={components:{QuestLog:M,QuestResultReveal:U,QuestProposalVoteInput:D,PlainOutput:z,QuestOutcomeVoteInput:at,Outcome:ct,QuestProposalVoteResult:bt,QuestProposalInput:Ct,Players:At},props:{game:Object,players:Array,playerId:String,team:String,role:String,isPlayerReady:Boolean},computed:{playerIsOrganiser:function(){return this.playerId==this.game.currentQuest.organiserId},currentOrganiser:function(){var t=this;return this.players.find((function(e){return e.id==t.game.currentQuest.organiserId}))},playerIsOrganisingTeamText:function(){return this.currentOrganiser.name+" is currently organising a team. The proposal will be voted on by all players shortly."},proposedQuestMembers:function(){for(var t=[],e=0;e<this.game.currentQuest.proposedPlayerIds.length;e++)t.push(this.getPlayerNameById(this.game.currentQuest.proposedPlayerIds[e]));return t},proposedQuestMemberNames:function(){var t=this;return this.game.currentQuest.proposedPlayerIds.map((function(e){return t.getPlayerNameById(e)}))}},methods:{getPlayerById:function(t){return this.players.find((function(e){return e.id==t}))},getPlayerNameById:function(t){var e=this.players.find((function(e){return e.id==t}));return e&&e.name?e.name:""},revealQuestResult:function(t){this.$emit("reveal-quest-result",t)},proposeTeam:function(t){this.$emit("propose-team",t)},readyUp:function(){this.$emit("ready-up")},notReady:function(){this.$emit("not-ready")}}},St=Ot,It=Object(u["a"])(St,R,A,!1,null,null,null),Pt=It.exports,Tt={name:"AvalonGame",components:{NameInput:p,Lobby:g,Reveal:k,Game:Pt},props:{socket:{type:Object,default:function(){var t=null;return t=n.a.connect({upgrade:!1,transports:["websocket"]}),t}},roomId:String},data:function(){return{room:null,players:[],team:null,role:null,metadata:[]}},computed:{isPlayerReady:function(){var t=this,e=this.players.find((function(e){return e.id==t.socket.id}));return e&&e.ready}},created:function(){var t=this;this.socket.on("players-updated",(function(e){console.log(e),t.players=e})),this.socket.on("player-updated",(function(e){console.log(e);var s=t.players.find((function(t){return t.id==e.id}));for(var a in s)s[a]=e[a]})),this.socket.on("player-assigned",(function(e){console.log(e),t.team=e.team,t.role=e.role,t.metadata=e.metadata.slice()})),this.socket.on("room-updated",(function(e){console.log(e),t.room=e}))},methods:{percivalEnabled:function(t){this.socket.emit("room-updated",{game:{settings:{percivalEnabled:t}}})},getPlayerId:function(){return this.socket.id},morganaEnabled:function(t){this.socket.emit("room-updated",{game:{settings:{morganaEnabled:t}}})},oberonEnabled:function(t){this.socket.emit("room-updated",{game:{settings:{oberonEnabled:t}}})},proposeTeam:function(t){this.socket.emit("room-updated",{game:{currentQuest:{proposedPlayerIds:t}}})},joinSession:function(t){this.name=t,this.socket.emit("player-joined",{name:this.name,roomId:this.roomId})},readyUp:function(){this.socket.emit("player-updated",{ready:!0})},readyUpWithVote:function(t){this.socket.emit("player-updated",{ready:!0,vote:t})},notReady:function(){this.socket.emit("player-updated",{ready:!1})},revealQuestResult:function(t){console.log(t)}}},Mt=Tt,Qt=(s("cfe2"),Object(u["a"])(Mt,a,r,!1,null,"0dd4dfcc",null));e["default"]=Qt.exports},"7db0":function(t,e,s){"use strict";var a=s("23e7"),r=s("b727").find,i=s("44d2"),n=s("ae40"),o="find",l=!0,c=n(o);o in[]&&Array(1)[o]((function(){l=!1})),a({target:"Array",proto:!0,forced:l||!c},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(o)},8418:function(t,e,s){"use strict";var a=s("c04e"),r=s("9bf2"),i=s("5c6c");t.exports=function(t,e,s){var n=a(e);n in t?r.f(t,n,i(0,s)):t[n]=s}},"9dc9":function(t,e,s){},a434:function(t,e,s){"use strict";var a=s("23e7"),r=s("23cb"),i=s("a691"),n=s("50c4"),o=s("7b0b"),l=s("65f0"),c=s("8418"),d=s("1dde"),u=s("ae40"),m=d("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,b=Math.min,y=9007199254740991,f="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m||!p},{splice:function(t,e){var s,a,d,u,m,p,h=o(this),g=n(h.length),_=r(t,g),C=arguments.length;if(0===C?s=a=0:1===C?(s=0,a=g-_):(s=C-2,a=b(v(i(e),0),g-_)),g+s-a>y)throw TypeError(f);for(d=l(h,a),u=0;u<a;u++)m=_+u,m in h&&c(d,u,h[m]);if(d.length=a,s<a){for(u=_;u<g-a;u++)m=u+a,p=u+s,m in h?h[p]=h[m]:delete h[p];for(u=g;u>g-a+s;u--)delete h[u-1]}else if(s>a)for(u=g-a;u>_;u--)m=u+a-1,p=u+s-1,m in h?h[p]=h[m]:delete h[p];for(u=0;u<s;u++)h[u+_]=arguments[u+2];return h.length=g-a+s,d}})},ae40:function(t,e,s){var a=s("83ab"),r=s("d039"),i=s("5135"),n=Object.defineProperty,o={},l=function(t){throw t};t.exports=function(t,e){if(i(o,t))return o[t];e||(e={});var s=[][t],c=!!i(e,"ACCESSORS")&&e.ACCESSORS,d=i(e,0)?e[0]:l,u=i(e,1)?e[1]:void 0;return o[t]=!!s&&!r((function(){if(c&&!a)return!0;var t={length:-1};c?n(t,1,{enumerable:!0,get:l}):t[1]=1,s.call(t,d,u)}))}},b0c0:function(t,e,s){var a=s("83ab"),r=s("9bf2").f,i=Function.prototype,n=i.toString,o=/^\s*function ([^ (]*)/,l="name";a&&!(l in i)&&r(i,l,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(t){return""}}})},b727:function(t,e,s){var a=s("0366"),r=s("44ad"),i=s("7b0b"),n=s("50c4"),o=s("65f0"),l=[].push,c=function(t){var e=1==t,s=2==t,c=3==t,d=4==t,u=6==t,m=5==t||u;return function(p,v,b,y){for(var f,h,g=i(p),_=r(g),C=a(v,b,3),w=n(_.length),E=0,x=y||o,k=e?x(p,w):s?x(p,0):void 0;w>E;E++)if((m||E in _)&&(f=_[E],h=C(f,E,g),t))if(e)k[E]=h;else if(h)switch(t){case 3:return!0;case 5:return f;case 6:return E;case 2:l.call(k,f)}else if(d)return!1;return u?-1:c||d?d:k}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},cfe2:function(t,e,s){"use strict";var a=s("9dc9"),r=s.n(a);r.a},d81d:function(t,e,s){"use strict";var a=s("23e7"),r=s("b727").map,i=s("1dde"),n=s("ae40"),o=i("map"),l=n("map");a({target:"Array",proto:!0,forced:!o||!l},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,s){var a=s("c6b6");t.exports=Array.isArray||function(t){return"Array"==a(t)}},fb6a:function(t,e,s){"use strict";var a=s("23e7"),r=s("861d"),i=s("e8b5"),n=s("23cb"),o=s("50c4"),l=s("fc6a"),c=s("8418"),d=s("b622"),u=s("1dde"),m=s("ae40"),p=u("slice"),v=m("slice",{ACCESSORS:!0,0:0,1:2}),b=d("species"),y=[].slice,f=Math.max;a({target:"Array",proto:!0,forced:!p||!v},{slice:function(t,e){var s,a,d,u=l(this),m=o(u.length),p=n(t,m),v=n(void 0===e?m:e,m);if(i(u)&&(s=u.constructor,"function"!=typeof s||s!==Array&&!i(s.prototype)?r(s)&&(s=s[b],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return y.call(u,p,v);for(a=new(void 0===s?Array:s)(f(v-p,0)),d=0;p<v;p++,d++)p in u&&c(a,d,u[p]);return a.length=d,a}})}}]);
//# sourceMappingURL=chunk-2a8da3b4.7190080b.js.map