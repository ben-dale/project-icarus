(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bef2e04"],{"1dde":function(e,t,s){var a=s("d039"),r=s("b622"),n=s("2d00"),i=r("species");e.exports=function(e){return n>=51||!a((function(){var t=[],s=t.constructor={};return s[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,s){var a=s("861d"),r=s("e8b5"),n=s("b622"),i=n("species");e.exports=function(e,t){var s;return r(e)&&(s=e.constructor,"function"!=typeof s||s!==Array&&!r(s.prototype)?a(s)&&(s=s[i],null===s&&(s=void 0)):s=void 0),new(void 0===s?Array:s)(0===t?0:t)}},"6fe5":function(e,t,s){},7921:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",attrs:{id:"app"}},[s("div",{staticClass:"row",class:{visible:!e.room,hidden:e.room}},[s("NameInput",{attrs:{buttonText:"Join"},on:{submit:e.joinSession}})],1),e.room&&e.room.game&&e.room.game.closed&&!e.room.playerIds.includes(e.getPlayerId())?s("div",{staticClass:"row"},[s("RoomClosed")],1):e._e(),e.room&&e.room.game&&e.room.playerIds.includes(e.getPlayerId())&&"LOBBY"==e.room.game.screen?s("div",{staticClass:"row"},[s("Lobby",{attrs:{socket:e.socket,room:e.room,players:e.players,isPlayerReady:e.isPlayerReady},on:{"percival-enabled":e.percivalEnabled,"oberon-enabled":e.oberonEnabled,"morgana-enabled":e.morganaEnabled,"player-ready":e.readyUp,"player-not-ready":e.notReady}})],1):e._e(),e.room&&e.room.game&&e.room.playerIds.includes(e.getPlayerId())&&"ROLE_REVEAL"==e.room.game.screen?s("div",{staticClass:"row"},[s("Reveal",{attrs:{players:e.players,isPlayerReady:e.isPlayerReady,team:e.team,role:e.role,settings:e.room.game.settings,metadata:e.metadata},on:{"player-ready":e.readyUp,"player-not-ready":e.notReady}})],1):e._e(),e.room&&e.room.game&&e.room.playerIds.includes(e.getPlayerId())&&"GAME"==e.room.game.screen?s("div",{staticClass:"row"},[s("Game",{attrs:{game:e.room.game,players:e.players,team:e.team,role:e.role,playerId:e.getPlayerId(),isPlayerReady:e.isPlayerReady},on:{"reveal-quest-vote":e.revealQuestVote,"propose-player-for-quest":e.proposePlayerForQuest,"unpropose-player-for-quest":e.unproposePlayerForQuest,"select-merlin-for-id":e.selectMerlinForId,"unselect-merlin-for-id":e.unselectMerlinForId,"player-ready":e.readyUp,"player-not-ready":e.notReady,"player-approve-proposal":e.playerApproveVote,"player-succeed-quest":e.playerSucceedQuest}})],1):e._e(),s("div",{staticStyle:{"padding-bottom":"200px"}})])},r=[],n=(s("7db0"),s("fb6a"),s("b0c0"),s("8055")),i=s.n(n),o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},l=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"card-text text-center"},[e._v("Sorry! The game has already started.")])])])])}],c={name:"RoomClosed"},d=c,u=s("2877"),y=Object(u["a"])(d,o,l,!1,null,null,null),p=y.exports,m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-md-4 offset-md-4"},[s("div",{staticClass:"input-group input-group-lg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Name","aria-label":"Name","aria-describedby":"button-start",maxlength:"10",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"button-start"},on:{click:e.submit}},[e._v(e._s(e.buttonText))])])])])},b=[],v={name:"NameInput",props:{buttonText:String},data:function(){return{name:""}},methods:{submit:function(){this.$emit("submit",this.name)}}},f=v,g=Object(u["a"])(f,m,b,!1,null,null,null),h=g.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"card bg-primary text-light"},[s("p",{staticClass:"card-header"},[e._v("Game settings")]),s("div",{staticClass:"card-body"},[e._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-4"},[s("button",{class:["btn","border-secondary","btn-block",e.room&&e.room.game.settings.percivalEnabled?"btn-info":"btn-secondary",e.room&&e.room.game.settings.percivalEnabled?"border-info":"border"],attrs:{type:"button",disabled:!e.isRoomOwner},on:{click:function(t){return e.percivalEnabled(!e.room.game.settings.percivalEnabled)}}},[e._v(" Percival "),s("br"),e._v("Knows Merlin's identity ")])]),s("div",{staticClass:"col-4"},[s("button",{class:["btn","border-secondary","btn-block",e.room&&e.room.game.settings.morganaEnabled?"btn-danger":"btn-secondary",e.room&&e.room.game.settings.morganaEnabled?"border-danger":"border"],attrs:{type:"button",disabled:!e.isRoomOwner||e.room.game.settings.oberonEnabled&&e.players.length<7},on:{click:function(t){return e.morganaEnabled(!e.room.game.settings.morganaEnabled)}}},[e._v(" Morgana "),s("br"),e._v("Appears as a second Merlin to Percival ")])]),s("div",{staticClass:"col-4"},[s("button",{class:["btn","border-secondary","btn-block",e.room&&e.room.game.settings.oberonEnabled?"btn-danger":"btn-secondary",e.room&&e.room.game.settings.oberonEnabled?"border-danger":"border"],attrs:{type:"button",disabled:!e.isRoomOwner||e.room.game.settings.morganaEnabled&&e.players.length<7},on:{click:function(t){return e.oberonEnabled(!e.room.game.settings.oberonEnabled)}}},[e._v(" Oberon "),s("br"),e._v("Invisible to all but Merlin ")])])])])])])]),s("div",{staticClass:"row pt-4 pb-3"},[s("div",{staticClass:"col-12 text-center text-light"},[s("p",[e._v("Further instruction and explanation will be provided as you play through The Resistance: Avalon.")]),s("p",[e._v("The next screen will reveal which team you are in and which role you will play.")]),e.playersStillNeeded>0?s("p",[e._v("We are still waiting for "+e._s(e.playersStillNeeded)+" more "+e._s(1==e.playersStillNeeded?"player":"players")+" to join the lobby.")]):e._e(),0==e.playersStillNeeded?s("p",[e._v(" Waiting for all players to click "),s("span",{staticClass:"badge badge-success"},[e._v("Ready")])]):e._e()])]),s("div",{staticClass:"row mb-5"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"card bg-primary text-light"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row text-center"},[e._l(e.players,(function(t){return s("div",{key:t.id,staticClass:"col-3"},[t.ready?s("p",{staticClass:"bg-success text-white py-2 mb-3 border-success rounded"},[e._v(e._s(t.name))]):e._e(),t.ready?e._e():s("p",{staticClass:"py-2 mb-3 text-dark rounded bg-secondary"},[e._v(e._s(t.name))])])})),e._l(e.playersStillNeeded,(function(t){return s("div",{key:t,staticClass:"col-3"},[s("p",{staticClass:"text-light py-2 border border-secondary rounded"},[e._v("Required")])])})),e._l(e.maxPlayers-(e.players.length+e.playersStillNeeded),(function(t){return s("div",{key:t+100,staticClass:"col-3"},[s("p",{staticClass:"text-light border border-secondary rounded py-2"},[e._v("Optional")])])}))],2)]),s("div",{staticClass:"card-footer"},[s("ReadyButton",e._g({attrs:{isPlayerReady:e.isPlayerReady}},e.$listeners))],1)])])]),e._m(1)])},C=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-info btn-block",attrs:{type:"button",disabled:""}},[e._v(" Merlin "),s("br"),e._v("Knows which team each player is a member of ")])]),s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-danger btn-block",attrs:{type:"button",disabled:""}},[e._v(" Assassin "),s("br"),e._v("Has an opportunity to steal the win after three successful quests ")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row mb-5"},[s("div",{staticClass:"col-6 offset-3"})])}],P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:["btn","btn-success","btn-block",e.large?"btn-lg":"",e.isPlayerReady?"btn-warning":"btn-success"],attrs:{type:"button",disabled:e.disabled},on:{click:e.click}},[e._v(e._s(e.isPlayerReady?"Not ready":"Ready"))])},R=[],I={name:"ReadyButton",props:{isPlayerReady:Boolean,large:Boolean,disabled:Boolean},methods:{click:function(){this.isPlayerReady?this.$emit("player-not-ready"):this.$emit("player-ready")}}},w=I,x=Object(u["a"])(w,P,R,!1,null,null,null),E=x.exports,k={name:"Lobby",components:{ReadyButton:E},props:{socket:Object,room:Object,players:Array,isPlayerReady:Boolean},data:function(){return{name:"",minPlayers:5,maxPlayers:10,currentMemberCount:0,readyClasses:"card bg-success text-white"}},computed:{isRoomOwner:function(){return this.room&&this.socket.id==this.room.ownerId},playersStillNeeded:function(){return this.players.length>=this.minPlayers?0:this.minPlayers-this.players.length}},methods:{percivalEnabled:function(e){this.$emit("percival-enabled",e)},morganaEnabled:function(e){this.$emit("morgana-enabled",e)},oberonEnabled:function(e){this.$emit("oberon-enabled",e)}}},O=k,S=Object(u["a"])(O,_,C,!1,null,"0b7dbbea",null),Q=S.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"row mb-5"},[s("div",{staticClass:"col-6 offset-3 text-center text-light"},[s("h2",{staticClass:"pt-2"},[s("span",{staticClass:"badge badge badge-info mx-2"},[e._v(e._s(e.goodPlayerCount()))]),e._v(" vs "),s("span",{staticClass:"badge badge badge-danger mx-2"},[e._v(e._s(e.players.length-e.goodPlayerCount()))])])])]),s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-6 offset-3"},[s("div",{class:["card","text-center","EVIL"==e.team?"bg-danger":"bg-info"]},[s("div",{staticClass:"card-body text-white"},["GUARD"==e.role?s("h3",{staticClass:"card-title"},[e._v("You are a Royal Guard")]):e._e(),"MERLIN"==e.role?s("h3",{staticClass:"card-title"},[e._v("You are Merlin")]):e._e(),"OBERON"==e.role?s("h3",{staticClass:"card-title"},[e._v("You are Oberon")]):e._e(),"PERCIVAL"==e.role?s("h3",{staticClass:"card-title"},[e._v("You are Percival")]):e._e(),"ASSASSIN"==e.role?s("h3",{staticClass:"card-title"},[e._v("You are the Assassin")]):e._e(),"MINION"==e.role?s("h3",{staticClass:"card-title"},[e._v("You are a Minion")]):e._e(),"MORGANA"==e.role?s("h3",{staticClass:"card-title"},[e._v("You are Morgana")]):e._e(),"GOOD"==e.team&&"MERLIN"===e.role?s("p",{staticClass:"card-text"},[e._v("You know who is in Evil. Evil will win if they can identify you.")]):e._e(),"GOOD"==e.team&&"MERLIN"!==e.role?s("p",{staticClass:"card-text"},[e._v("Your goal is to complete three quests.")]):e._e(),"EVIL"==e.team&&"ASSASSIN"===e.role?s("p",{staticClass:"card-text"},[e._v("You will be given an opportunity to assassinate Merlin after three successful quests.")]):e._e(),"EVIL"==e.team&&"ASSASSIN"!==e.role?s("p",{staticClass:"card-text"},[e._v("Your goal is to disrupt the flow of the game.")]):e._e()])])])]),"GUARD"!=e.role?s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-6 offset-3"},[s("div",{staticClass:"card bg-primary text-light"},["EVIL"==e.team||"MERLIN"==e.role?s("h5",{staticClass:"card-title text-center pt-3"},[e._v("Evil Team")]):e._e(),"EVIL"==e.team||"MERLIN"==e.role?s("h5",{staticClass:"card-text text-center mb-4"},e._l(e.metadata,(function(t,a){return s("span",{key:a,staticClass:"badge badge badge-danger mx-2"},[e._v(e._s(e.findPlayerName(t)))])})),0):e._e(),"PERCIVAL"==e.role?s("h5",{staticClass:"card-title text-center pt-3"},[e._v("Merlin is")]):e._e(),"PERCIVAL"==e.role?s("h5",{staticClass:"card-text pb-4 text-center"},[s("span",{staticClass:"badge badge-info mx-2"},[e._v(e._s(e.findPlayerName(e.metadata[0])))]),2==e.metadata.length?s("span",[e._v("or")]):e._e(),2==e.metadata.length?s("span",{staticClass:"badge badge-info mx-2"},[e._v(e._s(e.findPlayerName(e.metadata[1])))]):e._e()]):e._e()])])]):e._e(),s("div",{staticClass:"row mb-4"},[s("PlayerReadyBar",{attrs:{width:6,namesPerRow:2,players:e.players}})],1),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 offset-3"},[s("ReadyButton",e._g({attrs:{isPlayerReady:e.isPlayerReady}},e.$listeners))],1)])])},q=[],N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["col-"+e.width,"offset-"+e.getCardOffset()]},[s("div",{staticClass:"card bg-primary"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row text-center"},e._l(e.players,(function(t){return s("div",{key:t.id,class:["col-"+e.getNameWidth()]},[s("button",{class:[t.ready?"btn-success":"btn-primary border-secondary","mb-3","btn btn-sm btn-block"],attrs:{disabled:""}},[e._v(e._s(t.name))])])})),0)])])])},$=[],B=(s("a9e3"),{name:"PlayerReadyBar",props:{players:Array,width:{type:Number,default:12},namesPerRow:{type:Number,default:6}},methods:{getNameWidth:function(){switch(this.namesPerRow){case 1:return 12;case 2:return 6;case 3:return 4;case 4:return 3;case 6:return 2}},getCardOffset:function(){switch(this.width){case 12:return 0;case 8:return 2;case 6:return 3}}}}),T=B,M=(s("b8b5"),Object(u["a"])(T,N,$,!1,null,"c44c5ed6",null)),L=M.exports,j={name:"Reveal",components:{PlayerReadyBar:L,ReadyButton:E},props:{team:String,role:String,settings:Object,ready:Boolean,socket:Object,metadata:Array,players:Array,isPlayerReady:Boolean},methods:{findPlayerName:function(e){return this.players.find((function(t){return t.id==e})).name},goodPlayerCount:function(){switch(this.players.length){case 5:return 3;case 6:return 4;case 7:return 4;case 8:return 5;case 9:return 6;case 10:return 6}}}},V=j,G=Object(u["a"])(V,A,q,!1,null,null,null),U=G.exports,Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"row"},[s("QuestLog",{attrs:{questLog:e.game.questLogs,players:e.players,disagreements:e.game.currentQuest.disagreements}})],1),s("div",{staticClass:"row mb-3"},[s("PlayerReadyBar",{attrs:{players:e.players}})],1),"QUEST_PROPOSING"!=e.game.state||e.playerIsOrganiser?e._e():s("div",{staticClass:"row"},[s("QuestWaiting",e._g({attrs:{header:"Team proposal",line1:"There are five quests to complete. Each quest has a nominated player that acts as the quest's leader.",line2:e.currentOrganiser.name+" is the current quest leader and is proposing a team for Quest "+e.game.currentQuest.id+".",questId:e.game.currentQuest.id,isPlayerReady:e.isPlayerReady}},e.$listeners))],1),"QUEST_PROPOSING"==e.game.state&&e.playerIsOrganiser?s("div",{staticClass:"row"},[s("QuestProposalInput",e._g({attrs:{questId:e.game.currentQuest.id,players:e.players,proposedPlayerIds:e.game.currentQuest.proposedPlayerIds,requiredPlayers:e.game.currentQuest.requiredPlayers,isPlayerReady:e.isPlayerReady}},e.$listeners))],1):e._e(),"QUEST_PROPOSAL"==e.game.state?s("div",{staticClass:"row"},[s("QuestProposalVoteInput",e._g({attrs:{questId:e.game.currentQuest.id,organiser:e.currentOrganiser.name,names:e.proposedQuestMemberNames,isPlayerReady:e.isPlayerReady}},e.$listeners))],1):e._e(),"QUEST_PROPOSAL_RESULT"==e.game.state?s("div",{staticClass:"row"},[s("QuestProposalVoteResult",e._g({attrs:{players:e.players,names:e.proposedQuestMemberNames,proposalAccepted:e.game.currentQuest.proposalAccepted,questId:e.game.currentQuest.id,isPlayerReady:e.isPlayerReady}},e.$listeners))],1):e._e(),"QUEST_STARTED"!=e.game.state||e.game.currentQuest.proposedPlayerIds.includes(e.playerId)?e._e():s("div",{staticClass:"row"},[s("QuestWaiting",e._g({attrs:{header:"Quest underway",line1:"The quest is underway!",line2:"The result of the quest will be revealed when the quest has been completed and everyone is ready.",questId:e.game.currentQuest.id,isPlayerReady:e.isPlayerReady}},e.$listeners))],1),"QUEST_STARTED"==e.game.state&&e.game.currentQuest.proposedPlayerIds.includes(e.playerId)?s("div",{staticClass:"row"},[s("QuestOutcomeVoteInput",e._g({attrs:{players:e.proposedQuestPlayers,questId:e.game.currentQuest.id,isEvil:"EVIL"==e.team,isPlayerReady:e.isPlayerReady}},e.$listeners))],1):e._e(),"QUEST_RESULT_REVEAL"==e.game.state?s("div",{staticClass:"row mb-3"},[s("QuestResultReveal",e._g({attrs:{organiserName:e.currentOrganiser.name,playerIsOrganiser:e.playerIsOrganiser,results:e.game.currentQuest.votes,questId:e.game.currentQuest.id,questResult:e.game.currentQuest.result,isPlayerReady:e.isPlayerReady}},e.$listeners))],1):e._e(),"MERLIN_ID"==e.game.state&&"ASSASSIN"==this.role?s("div",{staticClass:"row"},[s("MerlinIdentificationInput",e._g({attrs:{questId:e.game.currentQuest.id,players:e.players.filter((function(e){return"GOOD"===e.team})),proposedPlayerIds:e.game.currentQuest.proposedPlayerIds,requiredPlayers:1,isPlayerReady:e.isPlayerReady}},e.$listeners))],1):e._e(),"MERLIN_ID"==e.game.state&&"ASSASSIN"!=this.role?s("div",{staticClass:"row"},[s("QuestWaiting",e._g({attrs:{header:"Assassination attempt",line1:this.players.filter((function(e){return"EVIL"==e.team})).map((function(e){return e.name})).join(", ")+" are in Evil and now may openly discuss who they believe Merlin is.",line2:this.players.find((function(e){return"ASSASSIN"==e.role})).name+" is the Assassin. Their choice will be visible once everyone is ready.",questId:e.game.currentQuest.id,isPlayerReady:e.isPlayerReady}},e.$listeners))],1):e._e(),"GAME_OVER"==e.game.state&&"EVIL"==e.game.result?s("div",{staticClass:"row"},[s("Outcome",e._g({attrs:{winner:"EVIL",outcome:"Evil has taken the win!",buttonText:"Play Again",isPlayerReady:e.isPlayerReady}},e.$listeners))],1):e._e(),"GAME_OVER"==e.game.state&&"GOOD"==e.game.result?s("div",{staticClass:"row"},[s("Outcome",e._g({attrs:{winner:"GOOD",outcome:"The Assassin was not able to identify Merlin. Good has taken the win!",buttonText:"Play Again",isPlayerReady:e.isPlayerReady}},e.$listeners))],1):e._e()])},D=[],F=(s("d81d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("table",{staticClass:"table table-dark table-bordered bg-primary text-center text-light table-sm"},[e._m(0),s("tbody",e._l(e.questLog,(function(t){return s("tr",{key:t.id},[s("th",{class:{"bg-info text-white":"SUCCEED"===t.result,"bg-danger text-white":"FAIL"===t.result},attrs:{scope:"row"}},[e._v(e._s(t.id))]),s("td",[e._v(e._s(t.requiredPlayers))]),s("td",[e._v(e._s(e.getPlayerNameById(t.organiserId)))]),e._l(t.playerIds,(function(a,r){return s("td",{key:r*t.id},[e._v(e._s(e.getPlayerNameById(a)))])}))],2)})),0)])])]),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"card bg-primary"},[s("div",{staticClass:"card-body text-light"},[e.disagreements<5?s("div",{staticClass:"card-text text-center"},[e._v("Evil will steal the win after "+e._s(5-e.disagreements)+" "+e._s(5-e.disagreements==5?"":"more")+" proposal "+e._s(5-e.disagreements==1?"rejection":"rejections")+".")]):e._e(),e.disagreements>=5?s("div",{staticClass:"card-text text-center"},[e._v("Players could not agree on who should go on the quest. The game is now over.")]):e._e()])])])])])}),W=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",{staticClass:"thead bg-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[e._v("Quest")]),s("th",{attrs:{scope:"col"}},[e._v("Players required")]),s("th",{attrs:{scope:"col"}},[e._v("Organiser")]),s("th",{staticClass:"text-center",attrs:{scope:"col",colspan:"5"}},[e._v("Members")])])])}],J={props:{players:Array,questLog:Array,disagreements:Number},methods:{getPlayerNameById:function(e){var t=this.players.find((function(t){return t.id==e}));return t&&t.name?t.name:""}}},H=J,K=(s("eae8"),Object(u["a"])(H,F,W,!1,null,"3d6c4d40",null)),z=K.exports,X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card bg-primary text-light"},[s("div",{staticClass:"card-header"},[e._v("Quest "+e._s(e.questId)+" - Result")]),s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row"},e._l(e.results,(function(t,a){return s("div",{key:a,class:["col-2 mb-2",0===a?"offset-"+e.resultOffset():""]},[t.revealed&&"SUCCEED"===t.choice?s("div",{staticClass:"py-5 bg-info border border-info rounded text-center text-white"},[e._v("Succeed")]):e._e(),t.revealed&&"SABOTAGE"===t.choice?s("div",{staticClass:"py-5 bg-danger border border-danger rounded text-center text-white"},[e._v("Sabotage")]):e._e(),t.revealed?e._e():s("div",{staticClass:"py-5 bg-transparent border rounded text-center"},[e._v(" Result ")])])})),0),e.playerIsOrganiser?s("div",{staticClass:"row"},e._l(e.results,(function(t,a){return s("div",{key:a,class:["col-2",0===a?"offset-"+e.resultOffset():""]},[s("button",{staticClass:"btn btn-secondary btn-sm btn-block",attrs:{disabled:t.revealed},on:{click:function(t){return e.revealQuestVote(a)}}},[e._v("Reveal")])])})),0):e._e()]),s("div",{staticClass:"card-footer"},[s("ReadyButton",e._g({attrs:{isPlayerReady:e.isPlayerReady,disabled:""==e.questResult}},e.$listeners))],1)])])},Z=[],ee={name:"QuestResultReveal",components:{ReadyButton:E},props:{playerIsOrganiser:Boolean,organiserName:String,results:Array,questId:Number,questResult:String,isPlayerReady:Boolean},methods:{revealQuestVote:function(e){this.$emit("reveal-quest-vote",e)},resultOffset:function(){switch(this.results.length){case 2:return 4;case 3:return 3;case 4:return 2;case 5:return 1}}}},te=ee,se=Object(u["a"])(te,X,Z,!1,null,null,null),ae=se.exports,re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"card bg-primary text-light"},[s("div",{staticClass:"card-header"},[e._v("Quest "+e._s(e.questId)+" - Proposal vote")]),s("div",{staticClass:"card-body text-center"},[s("p",{staticClass:"card-text"},[e._v(e._s(e.organiser)+" has proposed the following team:")]),s("h5",{staticClass:"card-text mb-4"},e._l(e.names,(function(t,a){return s("span",{key:a,staticClass:"badge badge-info mx-2"},[e._v(e._s(t))])})),0),s("p",{staticClass:"card-text"},[e._v("Your vote will be seen by the other players. This is a majority vote.")])]),s("div",{staticClass:"card-footer"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-secondary btn-sm btn-block",attrs:{disabled:e.isPlayerReady},on:{click:function(t){return e.approve(!0)}}},[e._v("Approve")])]),s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-secondary btn-sm btn-block",attrs:{disabled:e.isPlayerReady},on:{click:function(t){return e.approve(!1)}}},[e._v("Reject")])])])])])])},ne=[],ie={props:{questId:Number,organiser:String,names:Array,isPlayerReady:Boolean},methods:{approve:function(e){this.$emit("player-approve-proposal",e)}}},oe=ie,le=Object(u["a"])(oe,re,ne,!1,null,null,null),ce=le.exports,de=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card bg-primary text-light"},[s("div",{staticClass:"card-header"},[e._v("Quest "+e._s(e.questId)+" - Quest underway")]),s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("p",{staticClass:"card-text"},[e._v("This quest contains the following players:")]),s("h5",{staticClass:"card-text mb-5"},e._l(e.players,(function(t,a){return s("span",{key:a,staticClass:"badge badge-info mx-2"},[e._v(e._s(t))])})),0),s("p",{staticClass:"card-text"},[e._v("How would you like to proceed? Your decision will be kept anonymous.")])])])]),s("div",{staticClass:"card-footer"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-sm btn-info btn-block",attrs:{disabled:e.isPlayerReady},on:{click:function(t){return e.succeed(!0)}}},[e._v("Succeed")])]),s("div",{staticClass:"col-6"},[s("button",{class:["btn","btn-sm",e.isEvil?"btn-danger":"btn-secondary","btn-block"],attrs:{disabled:!e.isEvil||e.isPlayerReady},on:{click:function(t){return e.succeed(!1)}}},[e._v("Sabotage")])])])])])])},ue=[],ye={props:{isEvil:Boolean,players:Array,questId:Number,isPlayerReady:Boolean},methods:{succeed:function(e){this.$emit("player-succeed-quest",e)}}},pe=ye,me=Object(u["a"])(pe,de,ue,!1,null,null,null),be=me.exports,ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-md-12"},[s("div",{class:["card","EVIL"==e.winner?"bg-danger":"bg-info"]},[s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col-12"},[s("h4",{staticClass:"card-title text-white"},[e._v(e._s(e.outcome))])])])])]),s("div",{staticClass:"row pb-5"},[s("div",{staticClass:"col-4 offset-4"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:e.isPlayerReady},on:{click:e.ready}},[e._v(e._s(e.buttonText))])])])])])])},fe=[],ge={props:{winner:String,outcome:String,buttonText:String,isPlayerReady:Boolean},methods:{ready:function(){this.$emit("player-ready")}}},he=ge,_e=Object(u["a"])(he,ve,fe,!1,null,null,null),Ce=_e.exports,Pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card bg-primary text-light"},[s("div",{staticClass:"card-header"},[e._v("Quest "+e._s(e.questId)+" - Proposal result")]),s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-5 offset-1"},[s("h5",[e._v("Approve")]),s("hr"),s("h5",e._l(e.players.filter((function(e){return"APPROVE"==e.vote})),(function(t,a){return s("span",{key:a,staticClass:"badge badge-info mx-2 my-2"},[e._v(e._s(t.name))])})),0)]),s("div",{staticClass:"col-5"},[s("h5",[e._v("Reject")]),s("hr"),s("h5",e._l(e.players.filter((function(e){return"REJECT"==e.vote})),(function(t,a){return s("span",{key:a,staticClass:"badge badge-info mx-2 my-2"},[e._v(e._s(t.name))])})),0)])])]),s("div",{staticClass:"card-footer"},[s("ReadyButton",e._g({attrs:{isPlayerReady:e.isPlayerReady}},e.$listeners))],1)])])},Re=[],Ie={components:{ReadyButton:E},props:{players:Array,proposalAccepted:Boolean,questId:Number,isPlayerReady:Boolean}},we=Ie,xe=Object(u["a"])(we,Pe,Re,!1,null,null,null),Ee=xe.exports,ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"card bg-primary text-light"},[s("div",{staticClass:"card-header"},[e._v("Quest "+e._s(e.questId)+" - Team proposal")]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-12 text-center"},[s("p",[e._v("You are tasked with proposing a team for Quest "+e._s(e.questId)+". All players will vote to either 'Accept' or 'Reject' your proposal.")]),s("p",[e._v(e._s(e.requiredPlayers)+" players are required for this quest. Click on the players you wish to nominate.")])])]),s("div",{staticClass:"row mb-4"},e._l(e.players,(function(t,a){return s("div",{key:a,class:["col-2 mb-2",a%5===0?"offset-1":""]},[e.proposedPlayerIds.includes(t.id)?e._e():s("button",{staticClass:"btn btn-secondary btn-sm btn-block",attrs:{disabled:e.isPlayerReady||e.requiredPlayers==e.proposedPlayerIds.length},on:{click:function(s){return e.select(t.id)}}},[e._v(e._s(t.name))]),e.proposedPlayerIds.includes(t.id)?s("button",{staticClass:"btn btn-info btn-sm btn-block",attrs:{disabled:e.isPlayerReady},on:{click:function(s){return e.unselect(t.id)}}},[e._v(e._s(t.name))]):e._e()])})),0)]),s("div",{staticClass:"card-footer"},[s("ReadyButton",e._g({attrs:{isPlayerReady:e.isPlayerReady,disabled:e.requiredPlayers!=e.proposedPlayerIds.length}},e.$listeners))],1)])])},Oe=[],Se={name:"QuestProposalInput",components:{ReadyButton:E},props:{players:Array,requiredPlayers:Number,questId:Number,isPlayerReady:Boolean,proposedPlayerIds:Array},methods:{resultOffset:function(){switch(this.requiredPlayers){case 2:return 4;case 3:return 3;case 4:return 2;case 5:return 1}},select:function(e){this.$emit("propose-player-for-quest",e)},unselect:function(e){this.$emit("unpropose-player-for-quest",e)}}},Qe=Se,Ae=Object(u["a"])(Qe,ke,Oe,!1,null,null,null),qe=Ae.exports,Ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"card bg-primary text-light"},[s("div",{staticClass:"card-header"},[e._v("Quest "+e._s(e.questId)+" - "+e._s(e.header))]),s("div",{staticClass:"card-body text-center"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("p",{staticClass:"card-text"},[e._v(e._s(e.line1))]),s("p",{staticClass:"card-text"},[e._v(e._s(e.line2))])])])]),s("div",{staticClass:"card-footer"},[s("ReadyButton",e._g({attrs:{isPlayerReady:e.isPlayerReady}},e.$listeners))],1)])])},$e=[],Be={name:"QuestWaiting",components:{ReadyButton:E},props:{questId:Number,organiserName:String,line1:String,line2:String,header:String,isPlayerReady:Boolean}},Te=Be,Me=Object(u["a"])(Te,Ne,$e,!1,null,null,null),Le=Me.exports,je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"card bg-primary text-light"},[s("div",{staticClass:"card-header"},[e._v("Quest "+e._s(e.questId)+" - Assassination attempt")]),s("div",{staticClass:"card-body"},[e._m(0),s("div",{staticClass:"row mb-4"},e._l(e.players,(function(t,a){return s("div",{key:a,class:["col-2 mb-2",0==a&&3==e.players.length?"offset-3":"",0==a&&4==e.players.length?"offset-2":""]},[e.proposedPlayerIds.includes(t.id)?e._e():s("button",{staticClass:"btn btn-secondary btn-sm btn-block",attrs:{disabled:e.isPlayerReady||e.requiredPlayers==e.proposedPlayerIds.length},on:{click:function(s){return e.select(t.id)}}},[e._v(e._s(t.name))]),e.proposedPlayerIds.includes(t.id)?s("button",{staticClass:"btn btn-info btn-sm btn-block",attrs:{disabled:e.isPlayerReady},on:{click:function(s){return e.unselect(t.id)}}},[e._v(e._s(t.name))]):e._e()])})),0)]),s("div",{staticClass:"card-footer"},[s("ReadyButton",e._g({attrs:{isPlayerReady:e.isPlayerReady,disabled:e.requiredPlayers!=e.proposedPlayerIds.length}},e.$listeners))],1)])])},Ve=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-12 text-center"},[s("p",{staticClass:"card-text"},[e._v("Your identity has been revealed to all players. You may now discuss openly with your team members who you believe Merlin is.")]),s("p",{staticClass:"card-text"},[e._v("If you manage to successfully identify Merlin you will steal the win.")])])])}],Ge={name:"MerlinIdentificationInput",components:{ReadyButton:E},props:{players:Array,requiredPlayers:Number,questId:Number,isPlayerReady:Boolean,proposedPlayerIds:Array},methods:{resultOffset:function(){switch(this.requiredPlayers){case 2:return 4;case 3:return 3;case 4:return 2;case 5:return 1}},select:function(e){this.$emit("select-merlin-for-id",e)},unselect:function(e){this.$emit("unselect-merlin-for-id",e)}}},Ue=Ge,Ye=Object(u["a"])(Ue,je,Ve,!1,null,null,null),De=Ye.exports,Fe={components:{QuestLog:z,QuestResultReveal:ae,QuestProposalVoteInput:ce,QuestOutcomeVoteInput:be,Outcome:Ce,QuestProposalVoteResult:Ee,QuestProposalInput:qe,QuestWaiting:Le,PlayerReadyBar:L,MerlinIdentificationInput:De},props:{game:Object,players:Array,playerId:String,team:String,role:String,isPlayerReady:Boolean},computed:{playerIsOrganiser:function(){return this.playerId==this.game.currentQuest.organiserId},currentOrganiser:function(){var e=this;return this.players.find((function(t){return t.id==e.game.currentQuest.organiserId}))},proposedQuestPlayers:function(){for(var e=[],t=0;t<this.game.currentQuest.proposedPlayerIds.length;t++)e.push(this.getPlayerNameById(this.game.currentQuest.proposedPlayerIds[t]));return e},proposedQuestMemberNames:function(){var e=this;return this.game.currentQuest.proposedPlayerIds.map((function(t){return e.getPlayerNameById(t)}))}},methods:{getPlayerById:function(e){return this.players.find((function(t){return t.id==e}))},getPlayerNameById:function(e){var t=this.players.find((function(t){return t.id==e}));return t&&t.name?t.name:""},revealQuestResult:function(e){this.$emit("reveal-quest-result",e)}}},We=Fe,Je=Object(u["a"])(We,Y,D,!1,null,null,null),He=Je.exports,Ke={name:"AvalonGame",components:{NameInput:h,Lobby:Q,Reveal:U,Game:He,RoomClosed:p},props:{socket:{type:Object,default:function(){var e=null;return e=i.a.connect({upgrade:!1,transports:["websocket"]}),e}},roomId:String},data:function(){return{room:null,players:[],team:null,role:null,metadata:[]}},computed:{isPlayerReady:function(){var e=this,t=this.players.find((function(t){return t.id==e.getPlayerId()}));return t&&t.ready}},created:function(){var e=this;this.socket.on("players-updated",(function(t){e.players=t})),this.socket.on("player-updated",(function(t){var s=e.players.find((function(e){return e.id==t.id}));s.ready=t.ready})),this.socket.on("player-assigned",(function(t){e.team=t.team,e.role=t.role,e.metadata=t.metadata.slice()})),this.socket.on("room-updated",(function(t){e.room=t}))},methods:{percivalEnabled:function(e){this.socket.emit("room-updated",{game:{settings:{percivalEnabled:e}}})},getPlayerId:function(){return this.socket.id},morganaEnabled:function(e){this.socket.emit("room-updated",{game:{settings:{morganaEnabled:e}}})},oberonEnabled:function(e){this.socket.emit("room-updated",{game:{settings:{oberonEnabled:e}}})},proposePlayerForQuest:function(e){this.socket.emit("room-updated",{game:{currentQuest:{playerIdToPropose:e}}})},revealQuestVote:function(e){this.socket.emit("room-updated",{game:{currentQuest:{voteToReveal:e}}})},unproposePlayerForQuest:function(e){this.socket.emit("room-updated",{game:{currentQuest:{playerIdToUnpropose:e}}})},selectMerlinForId:function(e){this.socket.emit("room-updated",{game:{currentQuest:{merlinIdToPropose:e}}})},unselectMerlinForId:function(e){this.socket.emit("room-updated",{game:{currentQuest:{merlinIdToUnpropose:e}}})},joinSession:function(e){this.name=e,this.socket.emit("player-joined",{name:this.name,roomId:this.roomId})},playerApproveVote:function(e){this.socket.emit("player-updated",{ready:!0,approveProposal:e})},playerSucceedQuest:function(e){this.socket.emit("player-updated",{ready:!0,succeedQuest:e})},readyUp:function(){this.socket.emit("player-updated",{ready:!0})},readyUpWithVote:function(e){this.socket.emit("player-updated",{ready:!0,vote:e})},notReady:function(){this.socket.emit("player-updated",{ready:!1})}}},ze=Ke,Xe=(s("f8c3"),Object(u["a"])(ze,a,r,!1,null,"4f5a0f91",null));t["default"]=Xe.exports},"7db0":function(e,t,s){"use strict";var a=s("23e7"),r=s("b727").find,n=s("44d2"),i=s("ae40"),o="find",l=!0,c=i(o);o in[]&&Array(1)[o]((function(){l=!1})),a({target:"Array",proto:!0,forced:l||!c},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(o)},8418:function(e,t,s){"use strict";var a=s("c04e"),r=s("9bf2"),n=s("5c6c");e.exports=function(e,t,s){var i=a(t);i in e?r.f(e,i,n(0,s)):e[i]=s}},ae40:function(e,t,s){var a=s("83ab"),r=s("d039"),n=s("5135"),i=Object.defineProperty,o={},l=function(e){throw e};e.exports=function(e,t){if(n(o,e))return o[e];t||(t={});var s=[][e],c=!!n(t,"ACCESSORS")&&t.ACCESSORS,d=n(t,0)?t[0]:l,u=n(t,1)?t[1]:void 0;return o[e]=!!s&&!r((function(){if(c&&!a)return!0;var e={length:-1};c?i(e,1,{enumerable:!0,get:l}):e[1]=1,s.call(e,d,u)}))}},b0c0:function(e,t,s){var a=s("83ab"),r=s("9bf2").f,n=Function.prototype,i=n.toString,o=/^\s*function ([^ (]*)/,l="name";a&&!(l in n)&&r(n,l,{configurable:!0,get:function(){try{return i.call(this).match(o)[1]}catch(e){return""}}})},b727:function(e,t,s){var a=s("0366"),r=s("44ad"),n=s("7b0b"),i=s("50c4"),o=s("65f0"),l=[].push,c=function(e){var t=1==e,s=2==e,c=3==e,d=4==e,u=6==e,y=5==e||u;return function(p,m,b,v){for(var f,g,h=n(p),_=r(h),C=a(m,b,3),P=i(_.length),R=0,I=v||o,w=t?I(p,P):s?I(p,0):void 0;P>R;R++)if((y||R in _)&&(f=_[R],g=C(f,R,h),e))if(t)w[R]=g;else if(g)switch(e){case 3:return!0;case 5:return f;case 6:return R;case 2:l.call(w,f)}else if(d)return!1;return u?-1:c||d?d:w}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},b8b5:function(e,t,s){"use strict";var a=s("cf8d"),r=s.n(a);r.a},bc51:function(e,t,s){},cf8d:function(e,t,s){},d81d:function(e,t,s){"use strict";var a=s("23e7"),r=s("b727").map,n=s("1dde"),i=s("ae40"),o=n("map"),l=i("map");a({target:"Array",proto:!0,forced:!o||!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(e,t,s){var a=s("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}},eae8:function(e,t,s){"use strict";var a=s("6fe5"),r=s.n(a);r.a},f8c3:function(e,t,s){"use strict";var a=s("bc51"),r=s.n(a);r.a},fb6a:function(e,t,s){"use strict";var a=s("23e7"),r=s("861d"),n=s("e8b5"),i=s("23cb"),o=s("50c4"),l=s("fc6a"),c=s("8418"),d=s("b622"),u=s("1dde"),y=s("ae40"),p=u("slice"),m=y("slice",{ACCESSORS:!0,0:0,1:2}),b=d("species"),v=[].slice,f=Math.max;a({target:"Array",proto:!0,forced:!p||!m},{slice:function(e,t){var s,a,d,u=l(this),y=o(u.length),p=i(e,y),m=i(void 0===t?y:t,y);if(n(u)&&(s=u.constructor,"function"!=typeof s||s!==Array&&!n(s.prototype)?r(s)&&(s=s[b],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return v.call(u,p,m);for(a=new(void 0===s?Array:s)(f(m-p,0)),d=0;p<m;p++,d++)p in u&&c(a,d,u[p]);return a.length=d,a}})}}]);
//# sourceMappingURL=chunk-1bef2e04.7185604d.js.map