{"version":3,"sources":["webpack:///./src/views/AvalonGame.vue?827d","webpack:///src/views/AvalonGame.vue","webpack:///./src/views/AvalonGame.vue?5542","webpack:///./src/views/AvalonGame.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","room","game","closed","playerIds","includes","socket","id","_m","attrs","on","joinSession","_e","disconnectedPlayerIds","length","rejoinSession","getPlayerId","_l","getDisconnectedPlayers","player","key","_v","_s","name","$event","copyLinkAndCode","screen","players","isPlayerReady","percivalEnabled","oberonEnabled","morganaEnabled","readyUp","notReady","team","role","settings","metadata","vote","revealQuestVote","proposePlayerForQuest","unproposePlayerForQuest","selectMerlinForId","unselectMerlinForId","playerApproveVote","playerSucceedQuest","staticStyle","staticRenderFns","components","props","type","Object","default","emit","roomId","String","data","computed","ready","created","playerToUpdate","beforeRouteLeave","close","next","methods","getPageUrl","window","location","href","getPlayerById","find","code","approveProposal","approve","succeedQuest","succeed","readyUpWithVote","navigator","clipboard","writeText","document","getElementById","buttonId","classList","remove","add","innerHTML","setTimeout","component"],"mappings":"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","file":"js/chunk-2d0d7d97.fed344d4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[(_vm.room && _vm.room.game && !_vm.room.game.closed && !_vm.room.playerIds.includes(_vm.socket.id))?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_vm._m(0),_c('div',{staticClass:\"row\"},[_c('TextInput',{attrs:{\"buttonText\":\"Join\",\"placeholder\":'Name',\"length\":8},on:{\"submit\":_vm.joinSession}})],1)])]):_vm._e(),(_vm.room && _vm.room.game && _vm.room.game.closed && !_vm.room.playerIds.includes(_vm.socket.id) && _vm.room.disconnectedPlayerIds.length > 0)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_vm._m(1),_c('div',{staticClass:\"row\"},[_c('TextInput',{attrs:{\"buttonText\":\"Rejoin\",\"placeholder\":'Code'},on:{\"submit\":_vm.rejoinSession}})],1)])]):_vm._e(),(_vm.room && _vm.room.game && _vm.room.game.closed && !_vm.room.playerIds.includes(_vm.socket.id) && _vm.room.disconnectedPlayerIds.length == 0)?_c('div',{staticClass:\"row\"},[_c('RoomClosed')],1):_vm._e(),(_vm.room && _vm.room.game.closed && _vm.room.disconnectedPlayerIds.length > 0 && _vm.room.playerIds.includes(_vm.getPlayerId()))?_c('div',_vm._l((_vm.getDisconnectedPlayers()),function(player){return _c('div',{key:player.id,staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_c('div',{staticClass:\"card bg-dark border border-primary mb-5\"},[_c('div',{staticClass:\"card-body text-light text-center py-5\"},[_c('p',{staticClass:\"card-text\"},[_vm._v(_vm._s(player.name)+\" has left the game.\")]),_c('p',{staticClass:\"card-text\"},[_vm._v(\"The game will resume when \"+_vm._s(player.name)+\" rejoins the game.\")]),_c('p',{staticClass:\"card-text\"},[_vm._v(\" They may rejoin the game using the code \"),_c('span',{staticClass:\"bg-primary px-2 py-1\"},[_vm._v(_vm._s(player.id))])])]),_c('div',{staticClass:\"card-footer bg-primary\"},[_c('button',{staticClass:\"btn btn-secondary btn-block\",attrs:{\"id\":'copyLinkAndCodeButton'+player.id},on:{\"click\":function($event){return _vm.copyLinkAndCode(player.id, player.name)}}},[_vm._v(\"Copy link + code\")])])])])])}),0):_vm._e(),(_vm.room && _vm.room.game && _vm.room.playerIds.includes(_vm.getPlayerId()) && _vm.room.game.screen == 'LOBBY')?_c('div',{staticClass:\"row\"},[_c('Lobby',{attrs:{\"socket\":_vm.socket,\"room\":_vm.room,\"players\":_vm.players,\"isPlayerReady\":_vm.isPlayerReady,\"minPlayers\":5},on:{\"percival-enabled\":_vm.percivalEnabled,\"oberon-enabled\":_vm.oberonEnabled,\"morgana-enabled\":_vm.morganaEnabled,\"player-ready\":_vm.readyUp,\"player-not-ready\":_vm.notReady}})],1):_vm._e(),(_vm.room && _vm.room.game  && _vm.room.playerIds.includes(_vm.getPlayerId()) && _vm.room.game.screen == 'ROLE_REVEAL' && _vm.room.disconnectedPlayerIds.length == 0)?_c('div',{staticClass:\"row\"},[_c('RoleReveal',{attrs:{\"players\":_vm.players,\"isPlayerReady\":_vm.isPlayerReady,\"team\":_vm.team,\"role\":_vm.role,\"settings\":_vm.room.game.settings,\"metadata\":_vm.metadata},on:{\"player-ready\":_vm.readyUp,\"player-not-ready\":_vm.notReady}})],1):_vm._e(),(_vm.room && _vm.room.game && _vm.room.playerIds.includes(_vm.getPlayerId()) && _vm.room.game.screen == 'GAME' && _vm.room.disconnectedPlayerIds.length == 0)?_c('div',{staticClass:\"row\"},[_c('Game',{attrs:{\"game\":_vm.room.game,\"players\":_vm.players,\"team\":_vm.team,\"role\":_vm.role,\"vote\":_vm.vote,\"playerId\":_vm.getPlayerId(),\"isPlayerReady\":_vm.isPlayerReady},on:{\"reveal-quest-vote\":_vm.revealQuestVote,\"propose-player-for-quest\":_vm.proposePlayerForQuest,\"unpropose-player-for-quest\":_vm.unproposePlayerForQuest,\"select-merlin-for-id\":_vm.selectMerlinForId,\"unselect-merlin-for-id\":_vm.unselectMerlinForId,\"player-ready\":_vm.readyUp,\"player-not-ready\":_vm.notReady,\"player-approve-proposal\":_vm.playerApproveVote,\"player-succeed-quest\":_vm.playerSucceedQuest}})],1):_vm._e(),_c('div',{staticStyle:{\"padding-bottom\":\"200px\"}})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row mb-3\"},[_c('div',{staticClass:\"col-12 col-lg-8 offset-lg-2 text-center\"},[_c('h5',{staticClass:\"text-light\"},[_vm._v(\"Enter your name\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row mb-3\"},[_c('div',{staticClass:\"col-12 col-lg-8 offset-lg-2 text-center\"},[_c('h5',{staticClass:\"text-light\"},[_vm._v(\"Enter your code\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div\n      v-if=\"room && room.game && !room.game.closed && !room.playerIds.includes(socket.id)\"\n      class=\"row\"\n    >\n      <div class=\"col-12\">\n        <div class=\"row mb-3\">\n          <div class=\"col-12 col-lg-8 offset-lg-2 text-center\">\n            <h5 class=\"text-light\">Enter your name</h5>\n          </div>\n        </div>\n        <div class=\"row\">\n          <TextInput buttonText=\"Join\" @submit=\"joinSession\" :placeholder=\"'Name'\" :length=\"8\" />\n        </div>\n      </div>\n    </div>\n    <div\n      v-if=\"room && room.game && room.game.closed && !room.playerIds.includes(socket.id) && room.disconnectedPlayerIds.length > 0\"\n      class=\"row\"\n    >\n      <div class=\"col-12\">\n        <div class=\"row mb-3\">\n          <div class=\"col-12 col-lg-8 offset-lg-2 text-center\">\n            <h5 class=\"text-light\">Enter your code</h5>\n          </div>\n        </div>\n        <div class=\"row\">\n          <TextInput buttonText=\"Rejoin\" @submit=\"rejoinSession\" :placeholder=\"'Code'\" />\n        </div>\n      </div>\n    </div>\n    <div\n      v-if=\"room && room.game && room.game.closed && !room.playerIds.includes(socket.id) && room.disconnectedPlayerIds.length == 0\"\n      class=\"row\"\n    >\n      <RoomClosed />\n    </div>\n\n    <div\n      v-if=\"room && room.game.closed && room.disconnectedPlayerIds.length > 0 && room.playerIds.includes(getPlayerId())\"\n    >\n      <div class=\"row\" v-for=\"player in getDisconnectedPlayers()\" :key=\"player.id\">\n        <div class=\"col-12\">\n          <div class=\"card bg-dark border border-primary mb-5\">\n            <div class=\"card-body text-light text-center py-5\">\n              <p class=\"card-text\">{{player.name}} has left the game.</p>\n              <p class=\"card-text\">The game will resume when {{player.name}} rejoins the game.</p>\n              <p class=\"card-text\">\n                They may rejoin the game using the code\n                <span\n                  class=\"bg-primary px-2 py-1\"\n                >{{player.id}}</span>\n              </p>\n            </div>\n            <div class=\"card-footer bg-primary\">\n              <button\n                :id=\"'copyLinkAndCodeButton'+player.id\"\n                @click=\"copyLinkAndCode(player.id, player.name)\"\n                class=\"btn btn-secondary btn-block\"\n              >Copy link + code</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      v-if=\"room && room.game && room.playerIds.includes(getPlayerId()) && room.game.screen == 'LOBBY'\"\n      class=\"row\"\n    >\n      <Lobby\n        :socket=\"socket\"\n        :room=\"room\"\n        :players=\"players\"\n        :isPlayerReady=\"isPlayerReady\"\n        :minPlayers=\"5\"\n        @percival-enabled=\"percivalEnabled\"\n        @oberon-enabled=\"oberonEnabled\"\n        @morgana-enabled=\"morganaEnabled\"\n        @player-ready=\"readyUp\"\n        @player-not-ready=\"notReady\"\n      />\n    </div>\n\n    <div\n      v-if=\"room && room.game  && room.playerIds.includes(getPlayerId()) && room.game.screen == 'ROLE_REVEAL' && room.disconnectedPlayerIds.length == 0\"\n      class=\"row\"\n    >\n      <RoleReveal\n        :players=\"players\"\n        :isPlayerReady=\"isPlayerReady\"\n        :team=\"team\"\n        :role=\"role\"\n        :settings=\"room.game.settings\"\n        :metadata=\"metadata\"\n        @player-ready=\"readyUp\"\n        @player-not-ready=\"notReady\"\n      />\n    </div>\n\n    <div\n      v-if=\"room && room.game && room.playerIds.includes(getPlayerId()) && room.game.screen == 'GAME' && room.disconnectedPlayerIds.length == 0\"\n      class=\"row\"\n    >\n      <Game\n        :game=\"room.game\"\n        :players=\"players\"\n        :team=\"team\"\n        :role=\"role\"\n        :vote=\"vote\"\n        :playerId=\"getPlayerId()\"\n        :isPlayerReady=\"isPlayerReady\"\n        @reveal-quest-vote=\"revealQuestVote\"\n        @propose-player-for-quest=\"proposePlayerForQuest\"\n        @unpropose-player-for-quest=\"unproposePlayerForQuest\"\n        @select-merlin-for-id=\"selectMerlinForId\"\n        @unselect-merlin-for-id=\"unselectMerlinForId\"\n        @player-ready=\"readyUp\"\n        @player-not-ready=\"notReady\"\n        @player-approve-proposal=\"playerApproveVote\"\n        @player-succeed-quest=\"playerSucceedQuest\"\n      />\n    </div>\n\n    <div style=\"padding-bottom:200px\"></div>\n  </div>\n</template>\n\n<script>\nimport io from \"socket.io-client\";\nimport RoomClosed from \"@/components/common/RoomClosed.vue\";\nimport TextInput from \"@/components/common/TextInput.vue\";\nimport Lobby from \"@/components/common/Lobby.vue\";\nimport RoleReveal from \"@/components/avalon/RoleReveal.vue\";\nimport Game from \"@/components/avalon/Game.vue\";\n\nexport default {\n  name: \"AvalonGame\",\n  components: { TextInput, Lobby, RoleReveal, Game, RoomClosed },\n  props: {\n    socket: {\n      type: Object,\n      default() {\n        let socket = null;\n        if (process.env.NODE_ENV == \"development\") {\n          socket = io.connect(\"http://localhost:3000\", {\n            upgrade: false,\n            transports: [\"websocket\"]\n          });\n        } else {\n          socket = io.connect({ upgrade: false, transports: [\"websocket\"] });\n        }\n        socket.emit(\"connect-avalon\");\n        return socket;\n      }\n    },\n    roomId: String\n  },\n  data() {\n    return {\n      room: null,\n      players: [],\n      team: null,\n      role: null,\n      vote: null,\n      metadata: []\n    };\n  },\n  computed: {\n    isPlayerReady() {\n      let player = this.players.find(o => o.id == this.getPlayerId());\n      return player && player.ready;\n    }\n  },\n  created() {\n    this.socket.on(\"players-updated\", players => {\n      // console.log(\"players-updated\");\n      // console.log(players);\n      this.players = players;\n    });\n    this.socket.on(\"player-updated\", player => {\n      // console.log(\"player-updated\");\n      // console.log(player);\n      // Typically it should only be the 'ready' field that is updated here\n      let playerToUpdate = this.players.find(o => o.id == player.id);\n      playerToUpdate.ready = player.ready;\n    });\n    this.socket.on(\"player-assigned\", player => {\n      // console.log(\"player-assigned\");\n      // console.log(player);\n      this.team = player.team;\n      this.role = player.role;\n      this.vote = player.vote;\n      this.metadata = player.metadata.slice();\n    });\n    this.socket.on(\"room-updated\", room => {\n      // console.log(\"room-updated\");\n      // console.log(room);\n      this.room = room;\n    });\n    this.socket.emit(\"get-room\", { roomId: this.roomId });\n  },\n  beforeRouteLeave(to, from, next) {\n    // https://router.vuejs.org/guide/advanced/navigation-guards.html#in-component-guards\n    this.socket.close();\n    next();\n  },\n  methods: {\n    getPageUrl() {\n      return window.location.href;\n    },\n    getDisconnectedPlayers() {\n      return this.room.disconnectedPlayerIds\n        .filter(pid => this.room.playerIds.includes(pid))\n        .map(pid => this.getPlayerById(pid))\n        .filter(p => p);\n    },\n    getPlayerById(playerId) {\n      return this.players.find(p => p.id == playerId);\n    },\n    percivalEnabled(enabled) {\n      this.socket.emit(\"room-updated\", {\n        game: { settings: { percivalEnabled: enabled } }\n      });\n    },\n    getPlayerId() {\n      return this.socket.id;\n    },\n    morganaEnabled(enabled) {\n      this.socket.emit(\"room-updated\", {\n        game: { settings: { morganaEnabled: enabled } }\n      });\n    },\n    oberonEnabled(enabled) {\n      this.socket.emit(\"room-updated\", {\n        game: { settings: { oberonEnabled: enabled } }\n      });\n    },\n    proposePlayerForQuest(playerId) {\n      this.socket.emit(\"room-updated\", {\n        game: { currentQuest: { playerIdToPropose: playerId } }\n      });\n    },\n    revealQuestVote(index) {\n      this.socket.emit(\"room-updated\", {\n        game: { currentQuest: { voteToReveal: index } }\n      });\n    },\n    unproposePlayerForQuest(playerId) {\n      this.socket.emit(\"room-updated\", {\n        game: { currentQuest: { playerIdToUnpropose: playerId } }\n      });\n    },\n    selectMerlinForId(playerId) {\n      this.socket.emit(\"room-updated\", {\n        game: { currentQuest: { merlinIdToPropose: playerId } }\n      });\n    },\n    unselectMerlinForId(playerId) {\n      this.socket.emit(\"room-updated\", {\n        game: { currentQuest: { merlinIdToUnpropose: playerId } }\n      });\n    },\n    joinSession(name) {\n      this.socket.emit(\"player-joined\", {\n        name: name,\n        roomId: this.roomId\n      });\n    },\n    rejoinSession(code) {\n      this.socket.emit(\"player-rejoined\", {\n        name: code,\n        roomId: this.roomId\n      });\n    },\n    playerApproveVote(approve) {\n      this.socket.emit(\"player-updated\", {\n        approveProposal: approve\n      });\n    },\n    playerSucceedQuest(succeed) {\n      this.socket.emit(\"player-updated\", {\n        succeedQuest: succeed\n      });\n    },\n    readyUp() {\n      this.socket.emit(\"player-updated\", { ready: true });\n    },\n    readyUpWithVote(vote) {\n      this.socket.emit(\"player-updated\", { ready: true, vote: vote });\n    },\n    notReady() {\n      this.socket.emit(\"player-updated\", { ready: false });\n    },\n    copyLinkAndCode(playerId, playerName) {\n      navigator.clipboard.writeText(\n        \"Hey, \" +\n          playerName +\n          \"! It looks like you left the game. Follow this link: \" +\n          window.location.href +\n          \" and enter the code: \" +\n          playerId\n      );\n      const buttonId = \"copyLinkAndCodeButton\" + playerId;\n      document.getElementById(buttonId).classList.remove(\"btn-secondary\");\n      document.getElementById(buttonId).classList.add(\"btn-primary\");\n      document.getElementById(buttonId).innerHTML = \"Copied!\";\n      setTimeout(() => {\n        document.getElementById(buttonId).classList.add(\"btn-secondary\");\n        document.getElementById(buttonId).classList.remove(\"btn-primary\");\n        document.getElementById(buttonId).innerHTML = \"Copy link + code\";\n      }, 400);\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AvalonGame.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AvalonGame.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AvalonGame.vue?vue&type=template&id=07a7a1ac&\"\nimport script from \"./AvalonGame.vue?vue&type=script&lang=js&\"\nexport * from \"./AvalonGame.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}